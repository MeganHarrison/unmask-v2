{
  "$schema": "../../node_modules/wrangler/config-schema.json",
  "name": "enhanced-relationship-intelligence-worker",
  "main": "src/index.ts",
  "compatibility_date": "2025-04-01",
  "compatibility_flags": ["nodejs_compat"],
  
  // Use the same D1 database as the main application
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "megan-personal",
      "database_id": "f450193b-9536-4ada-8271-2a8cd917069e"
    }
  ],
  
  // Vectorize bindings for relationship intelligence
  "vectorize": [
    {
      "binding": "VECTORIZE_INDEX",
      "index_name": "relationship-insights-1536"
    },
    {
      "binding": "RELATIONSHIP_VECTORS",
      "index_name": "unmask-relationship-insights"
    }
  ],
  
  // AI binding for Workers AI
  "ai": {
    "binding": "AI"
  },
  
  // Account configuration
  "account_id": "d1416265449d2a0bae41c45c791270ec",
  
  // Environment variables (set OPENAI_API_KEY via wrangler secret)
  "vars": {
    "ENVIRONMENT": "production"
  },
  
  // Scheduled triggers for batch processing
  "triggers": {
    "crons": [
      "0 */6 * * *"  // Run every 6 hours
    ]
  }
}